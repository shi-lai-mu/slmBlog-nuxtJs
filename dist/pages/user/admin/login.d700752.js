(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{309:function(t,e,n){t.exports=n.p+"img/account-bg3.df990ad.jpg"},310:function(t,e,n){},464:function(t,e,n){"use strict";var r=n(310);n.n(r).a},785:function(t,e,n){"use strict";n.r(e);n(43),n(15),n(16),n(8),n(38);var r=n(18);n(25);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={data:function(){return{login:{user:null,rsa:{pass:null}},uid:Date.now(),qqLoginUrl:"not url",page:"login"}},created:function(){this.page="register"===this.$route.name?"register":"login",this.qqLoginUrl="https://graph.qq.com/oauth2.0/show?which=Login&display=pc&response_type=code&client_id=101540984&display=mobile&redirect_uri=http%3A%2F%2Fmczyzy.cn%3A8080%2Fqqlogin%2Fcallback&state="+this.uid,this.$store.state.mobile&&(this.qqLoginUrl="https://xui.ptlogin2.qq.com/cgi-bin/xlogin?appid=716027609&pt_3rd_aid=101540984&daid=383&pt_skey_valid=1&style=35&s_url=http%3A%2F%2Fconnect.qq.com&refer_cgi=authorize&which=&client_id=101540984&response_type=code&redirect_uri=http%3A%2F%2Fmczyzy.cn%3A8080%2Fqqlogin%2Fcallback&state="+this.uid+"&scope=get_user_info%2Cadd_share%2Cadd_t%2Cadd_pic_t%2Cget_repost_list&display=mobile"),this.$router.history.current.query.state&&this.qqLoginState()},methods:{loginEvent:function(){var t=this;"登录成功,欢迎回来 [".concat(t.login.user,"]!");t.login.user&&t.login.rsa.pass?t.$axios.api("USER_LOGIN").get({data:c({},t.login)}).then((function(e){if(e.error)t.observer.emit("toast",e);else{window.localStorage.setItem("userInfo",JSON.stringify(e)),t.$store.dispatch("USER",e),t.observer.emit("toast",{icon:"zhiwen",text:"登录成功,欢迎回来 [".concat(t.login.user,"]!"),time:!1,select:[{value:"管理账号",action:function(){}},{value:"个人中心",action:function(){return t.$router.push({path:"/user/"+e.id}),!0}}]}),t.observer.emit("HeaderRouter");var n=t.$route.query.page;n?t.$router.push({path:n}):t.$router.push({path:"/"})}})):t.observer.emit("toast",{icon:"wrong",text:"请将信息先写完整!"})},qqLogin:function(){window.addEventListener("blur",(function e(){function n(){window.removeEventListener("blur",e),window.removeEventListener("focus",n),t.qqLoginState()}window.addEventListener("focus",n)}));var t=this},qqLoginState:function(t){var e=this,n=this.$router.history.current.query.state||e.uid,r={text:"QQ登录授权失败!",icon:"error",hideTime:4e3};e.$axios.get("qqLogin/exists",{uid:n}).then((function(t){t.data.value?(e.$store.state.user=JSON.parse(JSON.parse(t.data.value)),r.icon="success",r.text="授权成功, 欢迎回来 [".concat(e.$store.state.user.nickname,"]!"),e.$connecter.$emit("user",JSON.parse(JSON.parse(t.data.value))),e.$connecter.$emit("page",{toast:r})):(r.text="授权失败, 回调值错误!",e.$connecter.$emit("page",{toast:r}))})).catch((function(){e.$connecter.$emit("page",{toast:r})}))}}},d=(n(464),n(7)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"conter"},[r("div",{staticClass:"account clearfix"},[r("img",{staticClass:"border-line",attrs:{src:n(309),alt:"图1"}}),t._v(" "),r("form",{attrs:{action:""}},[r("label",[t._v("账号")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.login.user,expression:"login.user"}],staticClass:"input-1v",attrs:{type:"text",name:"log_user"},domProps:{value:t.login.user},on:{input:function(e){e.target.composing||t.$set(t.login,"user",e.target.value)}}}),t._v(" "),r("label",[t._v("密码")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.login.rsa.pass,expression:"login.rsa.pass"}],staticClass:"input-1v",attrs:{type:"password",name:"log_pass",autocomplete:"tel"},domProps:{value:t.login.rsa.pass},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginEvent(e)},input:function(e){e.target.composing||t.$set(t.login.rsa,"pass",e.target.value)}}}),t._v(" "),r("span",{staticClass:"button-lv0",on:{click:t.loginEvent}},[t._v("登陆")])]),t._v(" "),r("span",{staticClass:"account-right"},[r("a",{attrs:{href:t.qqLoginUrl,target:"_black",rel:"noopener noreferrer"},on:{click:t.qqLogin}},[r("i",{staticClass:"iconfont icon-ziyuan"}),t._v(" "),r("span",[t._v("QQ登录")])]),t._v(" "),r("nuxt-link",{attrs:{to:"register"}},[r("i",{staticClass:"iconfont icon-zhuce"}),t._v(" "),r("span",[t._v("注册账号")])])],1)])])}),[],!1,null,null,null);e.default=component.exports}}]);